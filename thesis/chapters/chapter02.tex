\chapter{Theoretische Grundlagen}
\label{ch:fundamentals}
Dieses Kapitel stellt dem Leser benötigtes Basiswissen zur Verfügung. Es wird ein grundlegendes Wissen zu den Themenbereichen \ac{DLT} und \ac{IOT} vermittelt und auf weitere Informationsquellen verwiesen, welche tiefergehende Informationen bereitstellen.

%
% Section: DLT
%
\section{Distributed Ledger Technologies}
\label{sec:fundamentals:dlt}
Die Begriffe Blockchain und Distributed Ledger Technology (kurz: \ac{DLT}) werden häufig synonym verwendet, wobei es sich bei Blockchain um eine Unterklasse von \ac{DLT} handelt. Es handelt sich um dezentrale Netzwerke von Knoten, die Daten dezentral speichern, einen Konsens-Mechanismus zur Synchronisierung einsetzen und asymmetrische Verschlüsselungsverfahren zur Integrität und Absicherung des Systems nutzen. Hauptbestandteil eines Distributed Ledgers ist der Ledger selbst (deutsch: Kassenbuch), der eine Historie aller erfolgten Transaktionen speichert. Eine Transaktion stellt eine Wertübertragung zwischen Entitäten dar. Sie beinhaltet einen Sender, einen Empfänger und eine Anzahl Einheiten, die versendet werden sollen. Je nach Implementierung können weitere Inhalte dazukommen.\\
Die Blockchain hat ihren Namen aufgrund der Beschaffenheit des Ledgers: Transaktionen werden in sogenannten Blöcken gruppiert und gespeichert. Jeder Block hat eine Referenz auf den vorherigen Block, indem er dessen kryptografisch berechneten Hashwert speichert. Damit ergibt sich eine einfach verkettete Liste (Chain) von Blöcken (Block), die den gesamten Ledger repräsentiert. Ein Block wird von einem oder mehreren Knoten, die am Konsensverfahren teilnehmen, erzeugt und mittels des Konsensalgorithmus durch alle beteiligten Knoten vor Manipulation geschützt. Genauere Erläuterungen zur Funktionsweise sowie eine Auflistung gängiger Konsensverfahren werden in Abschnitt \ref{subsec:fundamentals:dlt:consensus} beschrieben.\\

\subsection{Taxonomie von Blockchains}
\label{subsec:fundamentals:dlt:taxonomy}
Blockchains können klassifiziert nach \cite{overview2017} werden, indem man die Sichtbarkeit von Informationen sowie die aktive Teilnahme von Netzwerkknoten am Konsensmechanismus betrachtet. Ist die Blockchain öffentlich erreichbar und können Transaktionen und Blöcke von beliebigen Knoten eingesehen werden, so handelt es sich um eine öffentliche (Public) Blockchain. Ist der Zugang zum Blockchain-Netzwerk beschränkt und können nur berechtigte Knoten Transaktionen und Blöcke einsehen, so spricht man von einer privaten (Private) Blockchain. Eine besondere Form der Private Blockchain ist die Konsortial-Blockchain; hierbei handelt es sich meist um einen Zusammenschluss mehrere Entitäten (meist Unternehmen), welche die Zugangsbeschränkung zur Blockchain verwaltet. Zur besseren Verständlichkeit können Private und Public Blockchains analog zu Intranet (firmenintern) und Internet (weltweit zugängliches) gesehen werden.\\
Darüber hinaus lassen sich Blockchains über die Teilnahme am Konsensalgorithmus, also der Entscheidung, welche Transaktionen in die Blockchain übernommen werden, klassifizieren: Ist jeder Netzwerkknoten, der die Blockchain erreichen und damit Informationen einsehen kann (unabhängig von public oder private) berechtigt, am Konsensverfahren teilzunehmen, so spricht man von einer beschränkungslosen (Permissionless) Blockchain. Ist das Konsensverfahren auf priviligierte Knoten beschränkt, so handelt es sich um eine zugangsbeschränkte (Permissioned) Blockchain. Die vorgestellte Klassifizierung in Public, Private, Permissioned und Permissionless lassen sich darüber hinaus kombinieren, wodurch es vier mögliche Arten von Blockchains gibt. Abbildung \ref{fig:chapter02:taxonomy}\footnote{vgl. https://medium.com/ltonetwork/the-rise-of-private-permissionless-blockchains-part-2-62553256953d} stellt diese übersichtlich dar und listet dazu einige bekannte Umsetzungen auf.

\begin{figure}[htbp]
 \centering
 \includegraphics[width=0.8\textwidth]{gfx/taxonomy.png}
 \caption{Taxonomie von Blockchains}
 \label{fig:chapter02:taxonomy}
\end{figure}

Die bekanntesten Vertreter Bitcoin und Ethereum sind öffentliche und beschränkungslose Blockchains, an denen jeder teilnehmen kann und alle Daten öffentlich einsehbar sind. Im Unternehmensumfeld wird häufig auf eine private Blockchain gesetzt, da die Zugangskontrolle zu gegebenenfalls sensiblen Daten gewährleistet wird und keine Geschäftsgeheimnisse nach Außen dringen können. Kooperationen zwischen mehreren Unternehmen werden oftmals als private, permissioned Blockchains umgesetzt, da hier jeder Kooperationspartner einen oder mehrere am Konsensverfahren teilnehmende Knoten besitzt.


\subsection{Smart-Contracts}
\label{subsec:fundamentals:dlt:smartcontracts}
Ein essentieller Bestandteil vieler Blockchains sind sogenannte Smart-Contracts. Dabei handelt es sich um Software-Code, der auf der Blockchain ("onchain") auf allen Knoten ausgeführt wird und eine Zustandsänderung meist in Form von ausgehenden Transaktionen zur Folge hat. Smart-Contracts werden in einer abgeschirmten Laufzeit-Umgebung (engl.: Runtime-Environment) ausgeführt; im Falle von Ethereum spricht man von der \ac{EVM}. Um auf Daten und Informtionen außerhalb des Blockchain-Netzwerkes zugreifen zu können, können sich Smart-Contract sogenannter Oracle-Services bedienen. Dabei handelt es sich um Informationsanbieter, die zum Beispiel Wetterdaten, Lottozahlen oder Nahverkehrsinformationen an einen Smart-Contract senden, damit dieser, basierend auf den empfangenen Daten, seine Logik ausführen und die Daten verarbeiten kann. Der grundlegende Nachteil von Oracle-Services liegt in der Vertrauensfrage: Während eine Blockchain grundsätzlich mittels Konsensverfahrens die Vertrauensfrage beantwortet, obliegt dem Besitzer bzw. Betreiber eines Oracles die Macht über die Richtigkeit der Daten. Dieser Problematik kann durch den Einsatz mehrerer, mittels eines separat implementierten Konsens abgestimmter Oracle-Services entgegengewirkt werden.\\
Mit Smart-Contracts werden oftmals (allerdings nicht ausschließlich) Verträge wie Kauf- oder Mietverträge umgesetzt. Bei solchen Verträgen ist das jeweils geltende Recht eines Landes zu beachten: Die Form und der Aufbau sowie der abzubildende Inhalt eines Vertrages muss gewissen Normen entsprechen und alle benötigten Informationen enthalten, damit ein Vertrag rechtskräftig ist.


\subsection{Mutlisignatur-Wallets}
\label{subsec:fundamentals:dlt:multisig}
%http://groups.csail.mit.edu/cis/crypto/classes/6.857/papers/secret-shamir.pdf
%https://hackernoon.com/shamir-secret-sharing-vs-multi-sig-124a42bc1662
%https://www.binance.vision/de/security/threshold-signatures-explained
%https://medium.com/zengo/threshold-signatures-private-key-the-next-generation-f27b30793b
Multisignatur-Wallets sind Wallets, auf dessen Inhalt nur durch den Einsatz mehrerer Schlüssel zugegriffen werden kann. Dabei wird ein Multisignatur-Wallet von \textit{n} Schlüsseln erzeugt. Um auf das Vermögen zugreifen zu können, bedarf es der Signaturen von \textit{t von n} Schlüsseln. Dadurch können verschiedene Anwendungsfälle abgedeckt werden wie zum Beispiel Treuhandkonten (2 von 3), Zwei-Wege-Authentifizierungen und viele weitere (2 von 2). Mutlisignatur-Wallets können entweder Teil des Blockchain-Protokolls sein (Higher fees, less privacy, not universally supported) und damit nativ unterstützt oder durch die Umsetzung mittels Smart-Contract realisiert werden. Letzteres ist dabei denkbar einfach: Es handelt sich um Code, der erst dann ausgeführt wird, wenn \textit{t von n} der hinterlegten Schlüssel unterschrieben haben. Die Höhe von \textit{t} und \textit{n} ist im Code festgelegt. Das Wallet wird demnach durch einen Smart-Contract abgebildet. Die Idee von Multisignatur-Wallets geht zurück auf das Shamir Secret Sharing Verfahren, welches im Folgenden kurz dargelegt wird:\\
\textbf{\textcolor{red}{todo}}\\
Ein großer Nachteil des Shamir Secret Sharing Verfahrens ist, dass bei der initialen Schlüsselgenerierung und bei der Entschlüsselung der vollständige private Schlüssel zusammengesetzt und damit an einem geografischen Ort vorhanden ist. Dies bietet ein gewisses Angriffspotential. Eine Weiterentwicklung des Shamir Secret Sharing Verfahrens ist das Schwellenwert-Signaturschema (engl. Threshold Signature Scheme, TSS), welches sich der \ac{MPC} bedient, wodurch der private Schlüssel niemals vollständig an einem Ort vorhanden ist. Um gemeinsam zu signieren oder entschlüsseln zu können, müssen alle beteiligten Parteien zeitlich synchron an dem Prozess teilnehmen. Das Verfahren wird im Folgenden kurz erläutert. Tiefergehende Informationen können X oder Y entnommen werden.\\
\textbf{\textcolor{red}{todo}}
Grundsätzlich verfolgen alle drei Verfahren - das Multisignatur-Wallet, das Shamir Secret Sharing Verfahren und das Schwellenwert-Signaturschema - das gleiche Ziel: Ein Geheimnis, wie zum Beispiel ein Private Key, wird auf mehrere Instanzen verteilt. Diese müssen an einem Ort zusammenkommen und ihre Teilgeheinmisse zusammenfügen, um Daten entschlüsseln oder signieren zu können. Dabei Unterscheiden sich die Verfahren unter Anderem in zeitliche Synchronität und geografische Lage des Schlüssels.


\subsection{Konsensalgorithmen}
\label{subsec:fundamentals:dlt:consensus}
Ein Blockchain-Netzwerk ist ein dezentrales System, welches aus vielen einzelnen Knoten besteht. Damit Transaktionen und Daten über das Gesamtsystem hinweg konsistent sind, bedarf es eines Mechanismus, welcher sicherstellt, dass alle Knoten die gleichen Daten halten. Solche Mechanismen werden durch Konsensalgorithmen beschrieben. Es handlet sich dabei um ein Protokoll, welches Regeln definiert, wie und welche Daten gespeichert und welche verworfen werden. Im Folgenden werden einige bekannte Konsensverfahren genannt und kurz vorgestellt.
\begin{description}
  \item[Proof-of-Work (PoW)] Transaktionen werden durch das Lösen eines kryptografischen Puzzles (Mining) wie zum Beispiel die Ermittlung eines Hashwertes abgesichert. Ein Knoten, der eine Transaktion dem Ledger hinzufügen möchte, muss zuerst eine zufallsbasierte Berechnung durchführen, um dem Netzwerk die Validität zu beweisen. Andere Knoten können mit sehr wenig Aufwand überprüfen, ob die Berechnung korrekt war und der Knoten ehrlich gehandelt hat. Dieses Konsensverfahren ist meist mit einem hohen Stromverbrauch verbunden, da die zeitaufwändige Berechnung viele Ressourcen benötigt.
  \item[Proof-of-Stake (PoS)] Unter der Annahme, dass Knoten mit hoher finanzieller Beteiligung (Stake) ehrlich agieren, um der Plattform nicht zu schaden und ihre finanziellen Mittel nicht zu gefährden, werden diese bei der Auswahl bevorzugt, eine Transaktion dem Ledger hinzuzufügen. Dieses Verfahren ist deutlich stromsparender als PoW, allerdings durch die Miteinbeziehung des Vermögens auch ungerechter im Vergleich zu PoW.
  \item[Delegated-Proof-of-Stake (dPoS)] Dieses Verfahren ergänzt PoS um ein Delegierten-System, was die Anzahl an potentiellen Konsensknoten stark einschränkt und damit die Performance erhöht. Knoten, die bösartig handeln können aus dem Konsens herausgewählt werden.
  \item[Practical Byzantine Fault Tolerance (PBFT)] Um in der Lage zu sein, bis zu einem Drittel an bösartigen Knoten handhaben zu können (Byzantinischer Fehler), müssen alle Knoten des Gesamtsystems bekannt sein. Dieses Verfahren löst das Konsensproblem, indem der Konsens in Runden eingeteilt wird und jede Runde Transaktionen in den Ledger übernommen werden. Indem die Knoten untereinander ihre Validierungsergebnisse austauschen kann ein Mehrheitsentscheid durchgeführt werden und damit die korrekten Transaktionen identifiziert werden.
  \item[Proof-of-Authority (PoA)] Dieses Verfahren wird meist in privaten und permissioned Blockchains eingesetzt. Die Konsensknoten sind fest definiert und fungieren als Moderatoren des Gesamtsystems. Da kein Mining existiert, können Transaktionskosten minimal gehalten werden und das System kann aufgrund des einfachen Aufbaus des Konsens sehr gut skalieren.
\end{description}
Detailliertere Informationen sowie weitere Konsensverfahren werden von \cite{Salimitari2018ASO}, \cite{overview2017} und \cite{consensusIOT2018} vorgestellt und analysiert.


\subsection{Skalierungsansätze}
\label{subsec:fundamentals:dlt:scaling}
%https://hackernoon.com/difference-between-sidechains-and-state-channels-2f5dfbd10707
State-Channel wurden als eine mögliche Antwort auf das Skalierungsproblem von Blockchains entwickelt. Ziel ist es dabei, jegliche Arten von Status-ändernden Operationen off-chain zu prozessieren, die typischerweise auf der Blockchain ausgeführt und on-chain gespeichert werden. Dadurch können die Anzahl an Zugriffen auf die Blockchain sowie die Anzahl an Transaktionen verringert und gleichzeitig die Interaktionszeit zwischen einzelnen Parteien verbessert werden. Im Kontext von Zahlungen (Payments) werden dadurch sogenannte Micro-Payments ermöglicht; bei State-Channel, die sich auf die Zahlungsabwicklung beschränken, spricht man von Payment-Channel. Diese können schneller und günstiger als normale Transaktionen erfolgen. Die Kosten solcher Micro-Payments können sehr gering gehalten werden, da nicht alle Transaktionen auf der Blockchain gespeichert werden. Die Grundidee ist dabei folgende: Alice und Bob reservieren einen Teil ihres Vermögens auf der Blockchain, sodass sie vorerst nicht darüber verfügen können und eröffnen einen Payment-Channel zueinander. Diese Transaktion, also das Eröffnen des Payment-Channels, wird auf der Blockchain gespeichert. Das Volumen des Channels, also das Vermögen, dass Alice und Bob nun zwischen einander austauschen können, entspricht der Summe der reservierten Vermögen. Ihr gewünschtes Vermögen, welches für den Payment-Channel reserviert werden soll, kann entweder mittels Multisignatur-Wallet (vgl. Kap. \ref{subsec:fundamentals:dlt:multisig}) oder Smart-Contract (vgl. Kap. \ref{subsec:fundamentals:dlt:smartcontracts}) reserviert werden. Alice und Bob haben nun einen State von jeweils 50 Euro. Anschließend können sich beide signierte off-chain Transaktionen schicken (also nicht über das Blockchain-Netzwerk). Diese Transaktionen enthalten den neuen State: Überweist Bob 10 Euro an Alice, so ändert sich der State von Alice von 50 Euro auf 60 Euro. Schickt Bob erneut eine Transaktion von 10 Euro, so ändert sich der State von Alice auf 70 Euro. Diesen Vorgang können beide nun solange wiederholen, wie sie möchten, solange sie sich in dem Volumen von 100 Euro bewegen. Zum Schließen eines Channels sendet Alice oder Bob eine Transaktion an das Blockchain-Netzwerk, welche den finalen State enthält (im Beispiel hat Alice 70 Euro und Bob 30). Für theoretisch unendlich viele Transaktionen zwischen Alice und Bob müssen lediglich die eröffnende und die schließende Transaktion des Payment-Channels on-chain gespeichert werden.\\
%https://busy.org/@bit-news/scalability-solutions-part-1
Einen weiteren, großen Vorteil liefert die durch den State-Channel ermöglichte Asynchronität von Transaktionen. Befinden sich Teilnehmer nicht im Blockchain-Netzwerk (zum Beispiel durch Konnektivitätsprobleme), so können keine Transaktionen durchgeführt werden. Hängen beispielsweise reale Aktionen wie zum Beispiel das Öffnen einer Schranke oder das Prozessieren einer Aktion mit einer Blockchain Statusaktualisierung zusammen, so würde bei Konnektivitätsverlust der reale Prozess zum Stillstand kommen, bis die Verbindung wiederhergestellt wird. State-Channel könnten hierbei eingesetzt werden, um eine redundante Verbindung zu schaffen, die auch bei Nicht-Erreichbarkeit der Blockchain genutzt werden könnte. Einige Beispiel-Implementierungen von State-Channels sind Bitcoins Lightning Network, Ethereums Raiden Network oder die Implementierung von Neo namens Trinity.\\
Eine weitere Möglichkeit, Blockchain-Anwendungen zu skalieren, kann durch den Einsatz von Side-Chains geschaffen werden. Hierbei handelt es sich um separate Blockchains, die parallel zur Haupt-Blockchain (auch oft Eltern-Blockchain oder Main-Chain genannt) laufen. Um eine Side-Chain zu eröffnen, muss zunächt der Beweis erbracht werden, dass alle Assets, deren Status in der Side-Chain verändert werden sollen, auf der Main-Chain gesperrt oder reserviert sind, sodass der Eigentümer temporär über diese nicht verfügen kann. Diese gesperrten Assets können anschließend in die Side-Chain transferriert werden. Dort kann der Status verändert werden; beispielsweise kann eine Geld-Transaktion durchgeführt werden. Soll ein Asset zurück auf die Main-Chain transferriert werden, so muss der Beweis erbracht werden, dass dieses Asset auf der Side-Chain gesperrt wurde. Dadurch werden Effekte wie das Double-Spending verhindert. Ähnlich wie bei State-Channels handelt es sich auch bei Side-Chains um einen Skalierungsansatz auf Layer-2 der Blockchain-Architektur.

\subsection{Dezentrale Identitäten}
\label{subsec:fundamentals:dlt:did}
Eine Identität zeichnet sich durch eine Menge von Informationen, Daten und Eigenschaften aus, die diese eindeutig identifizieren. Nur der Inhaber einer Identität kann mit dieser auch agieren, da er der einzige ist, der Zugriff auf die geschützten Informationen hat, die das Innehaben einer Identität bestätigen. Diese können zum Beispiel ein Passwort, eine Geburtsurkunde, ein Fingerabruck oder Ähnliches sein.\\
Eine dezentrale Identität ist eine neuartige Technologie, die es dem Inhaber einer solchen erlaubt, seine Identität digital, dezentral und sicher durch den Einsatz asymmetrischer Verschlüsselung selbst zu verwalten. Sie ist kryptografisch verifizierbar und der Inhaber entscheidet selbst, welche Informationen er teilen möchte und welche nicht. Das \ac{W3C} entwickelt aktuell (Stand: Dezember 2019) einen Industrie-Standard, der zur Verifizierung und Authentifizierung persönlicher Informationen vor Dritten im Web 3.0 eingesetzt werden soll, und sich derzeit in der Version 1.0 befindet \cite{did2019}. Eine dezentrale Identität besteht aus einer \ac{DID}, welche weltweit einzigartig ist, und einem dazugehörigen DID-Dokument, welches Informationen über den beschriebenen Gegenstand enthält. Die folgenden Beispiele zeigen eine \ac{DID} und ein dazugehörige DID-Dokument (entnommen aus \cite{did2019}).

\begin{lstlisting}[caption=Beispiel einer DID,label=listing:did]
did:example:123456789abcdefghi
\end{lstlisting}

\begin{lstlisting}[caption=Beispiel eines DID-Dokuments,label=listing:did_document]

{
  "@context": "https://www.w3.org/ns/did/v1",
  "id": "did:example:123456789abcdefghi",
  "authentication": [{

    "id": "did:example:123456789abcdefghi#keys-1",
    "type": "RsaVerificationKey2018",
    "controller": "did:example:123456789abcdefghi",
    "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n"
  }],
  "service": [{

    "id":"did:example:123456789abcdefghi#vcs",
    "type": "VerifiableCredentialService",
    "serviceEndpoint": "https://example.com/vc/"
  }]
}
\end{lstlisting}

Durch den Einsatz von Blockchain-Technologie können \ac{DID}s manipulationssicher, hochverfügbar und für jeden zugänglich gespeichert werden. Die \ac{DID} besteht aus drei Teilen: Zunächst dem Schlüsselwort "did", welches beschreibt, dass es sich um eine \ac{DID} handelt. Anschließend folgt die DID-Methode (im Beispiel: "example"), die definiert, wie die \ac{DID} aufzulösen und weitere Informtionen zu dieser Identität zu finden sind. Der letzte Teil ist eine ID ("123456789abcdefghi"), die für jede Methode einzigartig ist und somit eindeutig ermittelt werden kann.\\
Darüber hinaus existieren sogenannte \ac{VC}, die von vertrauenwürdigen Instanzen einer \ac{DID} ausgestellt werden können. Dabei handelt es sich um verifizierbare Berechtigungsnachweise. Der Aussteller bescheinigt dem Empfänger eine bestimmte Eigenschaft und stellt einen Service-Endpoint zur Verfügung, an dem ein Dritter diesen \ac{VC} verifizieren kann. So kann zum Beispiel eine Universität mit ihrer eigenen \ac{DID} "did:hda:123456789abcdefghi" einem Student "did:example:sebastiankanz" ein \ac{VC} ausstellen, welches dem Student bescheinigt, aktuell an der Universität eingeschrieben zu sein. Möchte sich der Student nun an der Universitätsbibliothek authentifizieren, so kann er dort das \ac{VC} der Universität vorzeigen und bekommt Zugriff auf die Bibliotheksausleihe. Die Bibliothek kann das \ac{VC} verifizieren, indem es unter der Methode "hda" und "example" die Universität und den Student identifiziert und anschließend die Signaturen überprüft.

\subsection{Blockchain im Kontext des OSI-Referenzmodells}
\label{subsec:fundamentals:dlt:osi}
Das \ac{OSI} Modell gilt seit Mitte der 80er-Jahre als Standard zur Einordnung von Netzwerkprotokollen. Es wurde von der \ac{ISO} entwickelt und besteht aus sieben Schichten \cite{OSI1980}:
\begin{description}
  \item[Physical Layer] Die Übertragung des Bit-Datenstroms über ein physikalisches Medium (Hardware) findet auf dieser Ebene statt.
  \item[Data Link Layer] Diese Schicht kapselt Daten in Datenframes und es werden grundlegende Funktionalitäten zur Fehlererkennung und Fehlerbehebung bereitgestellt. Bekannte Protokolle dieser Ebene sind zum Beispiel Ethernet und \ac{ARP}.
  \item[Network Layer] Diese Schicht kapselt Daten in Datenpaketen und implementiert Sequenznummern, Flusskontrolle und Funktionalitäten fürs Routing.
  \item[Transport Layer] Segment
  \item[Session Layer]
  \item[Presentation Layer]
  \item[Application Layer]
\end{description}

Bei einem dezentralen System wie \ac{DLT}, welches über ein Netzwerk kommuniziert, liegt es nahe, eine Einordnung in das \ac{OSI} Modell durchzuführen. Dazu werden die verschiedenen Bestandteile eines \ac{DLT}s vorgestellt und den Schichten des \ac{OSI} Modells zugeordnet. Die Schichten eins bis drei (Physical, Data Link und Network) werden hierbei nicht betrachtet, da die Kommunikation über das Internet erfolgt und demnach auf bekannten Protokollen aufgebaut wird (Ethernet, IP).

Eine Blockchain basiert auf einem \ac{P2P}-Netz, in dem alle Knoten miteinander verbunden sind und miteinander kommunizieren können. Diese Kommunikation geschieht nach dem Ende-zu-Ende Prinzip und nicht nach dem Punkt-zu-Punkt Prinzip. Die \ac{P2P}-Kommunikation erfolgt über die entsprechenden Transportprotokolle TCP oder UDP, welche Daten als Segmente zwischen Sender und Empfänger austauschen. Demnach findet die \ac{P2P}-Kommunikation auf dem Transport-Layer (Schicht 4) statt.\\
Der Konsensalgorithmus legt zum einen fest, welche Knoten am Konsensverfahren partizipieren dürfen und welche nicht. Dazu werden Verbindungen zu anderen Knoten aufgebaut und ggfs. wieder geschlossen. Zum anderen wird definiert, welchem Schema die Kommunikation folgt. Eingehende Datensegmente der \ac{P2P}-Schicht werden entgegengenommen und in Form von Transaktionen gemäß der Konsensregeln verarbeitet. Die Ergebnisse werden wiederum an die \ac{P2P}-Schicht zurückgespiegelt und über das Netzwerk an die anderen Knoten publiziert. Diese Vorgänge sind in den Session-Layer des \ac{OSI}-Modells einzuordnen.\\
Die virtuelle Maschine einer Blockchain sorgt dafür, dass die Verarbeitungsschritte auf allen Knoten zum selben Ergebnis führen. Dazu werden Smart-Contracts aus Transaktionen extrahiert, in Byte-Code übersetzt und in separierten Laufzeitumgebungen ausgeführt. Die Funktionen der Smart-Contracts werden der nächst-höheren Schicht zur Verfügung gestellt. Darüber hinaus werden Daten, die aus Smart-Contracts aufgrund von Ausführungsbefehlen der nächst-höheren Ebene entstehen, in Form von Transaktionen an die untere Ebene weitergereicht. Diese Funktionalitäten können in den Presentation-Layer (Schicht 6) eingeordnet werden.\\
Die Schittstellen zum Benutzer stellen zum einen Top-Level-\ac{API}s dar, über die der Benutzer mitels Transaktionen mit der Blockchain kommunizieren kann. Zum anderen gibt es dApps, ein Zusammenschluss mehrerer, zusammenarbeitender Smart-Contracts, auf dessen Daten der Benutzer beispielsweise mittels Webanwendung über seinen Browser zugreifen kann. Zusammen können beide Funktionalitäten dem Application-Layer (Schicht 7) zugeordnet werden.\\

In Abbildung \ref{fig:chapter02:osi_blockchain} werden die zugeordneten Schichten der Blockchain noch einmal aufgezeigt und mit den sieben Schichten des \ac{OSI}-Modells dargestellt.

\begin{figure}[htbp]
 \centering
 \includegraphics[width=0.6\textwidth]{gfx/osi_blockchain.png}
 \caption{Die Blockchain-Layer im Konext des OSI-Modells}
 \label{fig:chapter02:osi_blockchain}
\end{figure}

\cite{osi2014}
\textbf{\textcolor{red}{
  Definition Protokoll, Definition Kommunikationsprotokoll, Begründung warum Blockchain Kommunikationsprotokoll ist\\
  Value Exchange Protocol
}}




%
% Section: IOT
%
\section{Internet of Things}
\label{sec:fundamentals:iot}
Der Begriff Internet der Dinge - kurz IOT - ist ein Sammelbegriff und bezeichnet die Vernetzung von Gegenständen untereinander (meist über das Internet). Es wird eine autonome \ac{M2M}-Kommunikation ermöglicht, die wiederum den Automatisierungsgrad in dem jeweiligen Einsatzgebiet weiter erhöht. Nach \cite{deloitte2018} lässt sich das Themenfeld \ac{IOT} in zwei Bereiche untergliedern: \ac{CIOT} und \ac{IIOT}. Während \ac{CIOT} Anwendungen im privaten Umfeld sieht - vor allem geht es hier um Smart-Home und den damit verbundenen Applikationen - so fokussiert sich \ac{IIOT} auf den kommerziellen Bereich und versucht Anwendungen im deutlich größeren Stil zu entwickeln: Die Bereiche Automotive, Energie und Supply-Chain sind hierbei einige wichtige Vertreter.\\

\textbf{\textcolor{red}{Warum IOT und DLT?}}
\cite{SCIOT2016}
From the manufacturer's side, the current centralized model has a high maintenance cost consider the distribution of software updates to millions of devices for years after they have been long discontinued. From the consumer's side, there is a justified lack of a trust in devices that ``phone home'' in the background and a need for a ``security through transparency'' approach.

Geschuldet durch die Vielfältigkeit der Anwendungsfälle (mehr dazu in Abschnitt \ref{subsec:fundamentals:iot:usecases})
\textbf{\textcolor{red}{Abgrenzung IOT?}}

\subsection{Digitaler Zwilling}
\label{subsec:fundamentals:iot:digitaltwins}
Ein digitaler Zwilling (engl. Digital Twin) ist nach \cite{deloitte2018} eine virtuelle Kopie physikalischer Objekte. Diese besteht aus definierten Datenstrukturen, einem \ac{UI}, welches relevante Daten visualisiert und IT-Komponenten zur Statusaktualisierung und Konnektivität. Digitale Zwillinge werden in IT-automatisierten Prozesse benötigt, die sie als Schnittstelle zwischen physischer Welt und dessen digitalen Pendant fungieren. Der Zustand eines physikalischen Objekts wird in den digitalen Zwilling gespiegelt, welcher wiederum eine digitale Zustandsüberwachung und die Manipulation seines physischen Gegenstücks ermöglicht \cite{deloitte2018}. Der Ansatz von digitalen Zwillingen und die Thematik \ac{IOT} haben gegenseitig enormen Einfluss aufeinander und befähigen einander zu neuen Anwendungsfällen. Diese können unter Anderem die Abbildung von Fabriken und Maschinen in digitale Automatisierungsprozesse sein, indem die Geräte und Teile mit Sensoren, Konnektivität und einer Steuerungslogik ausgestattet werden. Dadurch können Predictive Maintance, Bearfsplanungen und Prozessoptimierungen durchgeführt werden.


\subsection{Anwendungsbereiche im Kontext DLT}
\label{subsec:fundamentals:iot:usecases}
\textbf{\textcolor{red}{todo}}
IOT-Bereiche mit Anwendungsbeispielen - Echtzeitanwendungen,
